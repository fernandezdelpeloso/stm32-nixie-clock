# Update the footprint with the via placed inside the extended Pad 1 (not offset)
kicad_mod_updated = """
(module TXB0104PW_Custom_Ext (layer F.Cu) (tedit 60B1D5A9)
  (descr "TXB0104PW with extended Pad 1 and via inside copper")
  (tags "level shifter TXB0104 TSSOP-14")
  (attr smd)
  (fp_text reference REF** (at 0 -3.8) (layer F.SilkS)
    (effects (font (size 1 1) (thickness 0.15)))
  )
  (fp_text value TXB0104PW_Custom (at 0 3.8) (layer F.Fab)
    (effects (font (size 1 1) (thickness 0.15)))
  )

  (fp_line (start -2.5 -2.45) (end 2.5 -2.45) (layer F.SilkS) (width 0.12))
  (fp_line (start 2.5 -2.45) (end 2.5 2.45) (layer F.SilkS) (width 0.12))
  (fp_line (start 2.5 2.45) (end -2.5 2.45) (layer F.SilkS) (width 0.12))
  (fp_line (start -2.5 2.45) (end -2.5 -2.45) (layer F.SilkS) (width 0.12))

  (pad 1 smd rect (at -2.9 -1.95) (size 2.2 0.4) (layers F.Cu F.Paste F.Mask))
  (pad 2 smd rect (at -2.9 -1.3) (size 0.8 0.4) (layers F.Cu F.Paste F.Mask))
  (pad 3 smd rect (at -2.9 -0.65) (size 0.8 0.4) (layers F.Cu F.Paste F.Mask))
  (pad 4 smd rect (at -2.9 0) (size 0.8 0.4) (layers F.Cu F.Paste F.Mask))
  (pad 5 smd rect (at -2.9 0.65) (size 0.8 0.4) (layers F.Cu F.Paste F.Mask))
  (pad 6 smd rect (at -2.9 1.3) (size 0.8 0.4) (layers F.Cu F.Paste F.Mask))
  (pad 7 smd rect (at -2.9 1.95) (size 0.8 0.4) (layers F.Cu F.Paste F.Mask))
  (pad 8 smd rect (at 2.9 1.95) (size 0.8 0.4) (layers F.Cu F.Paste F.Mask))
  (pad 9 smd rect (at 2.9 1.3) (size 0.8 0.4) (layers F.Cu F.Paste F.Mask))
  (pad 10 smd rect (at 2.9 0.65) (size 0.8 0.4) (layers F.Cu F.Paste F.Mask))
  (pad 11 smd rect (at 2.9 0) (size 0.8 0.4) (layers F.Cu F.Paste F.Mask))
  (pad 12 smd rect (at 2.9 -0.65) (size 0.8 0.4) (layers F.Cu F.Paste F.Mask))
  (pad 13 smd rect (at 2.9 -1.3) (size 0.8 0.4) (layers F.Cu F.Paste F.Mask))
  (pad 14 smd rect (at 2.9 -1.95) (size 0.8 0.4) (layers F.Cu F.Paste F.Mask))

  (pad 15 thru_hole circle (at -3.9 -1.95) (size 0.6 0.6) (drill 0.3)
       (layers *.Cu *.Mask) (zone_connect 2))
)
"""

# Write the updated footprint to a new file
updated_footprint_path = Path("/mnt/data/TXB0104PW_Custom_Ext_V2.kicad_mod")
updated_footprint_path.write_text(kicad_mod_updated)

# Return the path to the new footprint file
updated_footprint_path.name
